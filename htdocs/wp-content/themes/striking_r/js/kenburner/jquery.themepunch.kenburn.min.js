/**************************************************************************
 * jquery.themepunch.kenburn.js - jQuery Plugin for kenburn Slider
 * @version: 1.5 (15.01.2013)
 * @requires jQuery v1.4.6 or later
 * @author ThemePunch
**************************************************************************/

(function(e,t){function n(n,s){if(s.debug==="on")e("body").append('<div class="khinfo" style="background:#fff;color:#000;width:300px;height:250px;position:fixed;left:10px;top:10px;"></div>');n.append('<div class="kenburn-preloader"></div>');e("body").find(".khinfo").html("Start Slider");o(n,s);e("body").find(".khinfo").html("Prepared Container");r(n,s);e("body").find(".khinfo").html("Prepared Preloaded Slides");e("body").find(".khinfo").html("Waiting for Images...");s.loadedImages=0;n.waitForImages(function(){e("body").find(".khinfo").html("Preloaded Images has been loaded");s.waitForWF=setInterval(function(){e("body").find(".khinfo").html("Waiting for Google Fonts");if(e("body").data("googlefonts")!=t&&e("body").data("googlefonts")=="loaded"){s.lastThumb=s.currentThumb;if(s.thumbStyle=="image"||s.thumbStyle=="both"||s.thumbStyle=="thumb")u(n,s);if(s.thumbStyle=="bullet"||s.thumbStyle=="both")a(n,s);e("body").find(".khinfo").html("Google Fonts are here");clearInterval(s.waitForWF);f(n,s);e("body").find(".khinfo").html("Rotation Started");i(n,s);if(s.thumbStyle=="both")n.find(".thumbbuttons").css({visibility:"hidden"});n.css({"background-color":"transparent"})}},10)},function(){e("body").find(".khinfo").html(s.loadedImages+". Image has been Loaded");s.loadedImages=s.loadedImages+1});d(n,s);if(s.touchenabled=="on")n.swipe({swipeLeft:function(){var e=n.data("currentSlide");if(e.index()<s.maxitem-1){var t=n.find("ul li:eq("+(e.index()+1)+")")}else{var t=n.find("ul li:first")}h(e,t,n,s)},swipeRight:function(){var e=n.data("currentSlide");if(e.index()>0){var t=n.find("ul li:eq("+(e.index()-1)+")")}else{var t=n.find("ul li:eq("+(s.maxitem-1)+")")}h(e,t,n,s)},excludedElements:".close, .kenburn-video-overlay, .kenburn-video-button, .hover-more-sign, .hover-blog-link-sign .thumbnails, .closebutton",allowPageScroll:"auto"})}function r(t,n){t.find("iframe").attr("frameborder",0);t.find("ul").wrap('<div class="slide_mainmask" style="z-index:10;position:absolute;top:'+(n.padtop+n.botop)+"px;left:"+(n.padleft+n.boleft)+"px;width:"+n.width+"px;height:"+n.height+'px;overflow:hidden"></div>');t.find("ul .slide_mainmask").css({opacity:"0.0"});n.maxitem=0;t.find("ul >li").each(function(t){n.maxitem=n.maxitem+1;var r=e(this);var i=r.find("img:first");i.data("src",i.attr("src"));i.attr("src","")});for(var r=0;r<n.preloadedSlides;r++){s(t,n,r)}}function i(e,t){for(var n=t.preloadedSlides;n<t.maxitem;n++){s(e,t,n)}}function s(n,r,i){n.find("ul >li").each(function(s){if(s==i){var o=e(this);o.find(".creative_layer").wrap('<div class="layer_container" style="position:absolute;left:0px;top:0px;width:'+r.width+"px;height:"+r.height+'px"></div>');n.removeClass("kb-minisize").removeClass("kb-halfsize").removeClass("kb-fullsize");if(e(window).width()<=570)n.addClass("kb-minisize");else if(e(window).width()<=767)n.addClass("kb-smallsize");else if(e(window).width()<=959)n.addClass("kb-mediumsize");else if(e(window).width()>959)n.addClass("kb-fullsize");o.wrapInner('<div class="slide_container" style="z-index:10;position:absolute;top:0px;left:0px;width:'+r.width+"px;height:"+r.height+'px;overflow:hidden"><div class="parallax_container" style="position:absolute;top:0px;left:0px"><div class="kb_container"></div></div></div>');var u=e.browser.msie&&e.browser.version<9;if(o.find("img:first").data("bw")!=t&&o.find("img:first").data("bw").length>0&&!u)o.find(".kb_container").append('<img class="bw-main-image" src="'+o.find("img:first").data("bw")+'" style="position:absolute;top:0px;left:0px">');o.find("img:first").attr("src",o.find("img:first").data("src"));o.find(".slide_container").css({opacity:"0.0"});o.find(".slide_container .parallax_container .kb_container .video_kenburner").each(function(){var t=e(this);t.closest(".slide_container").append('<div class="kenburn-video-overlay"></div>');t.closest(".slide_container").append('<div class="kenburn-video-button"></div>');t.closest(".slide_container").data("video",1);var i=t.closest(".slide_container").parent().find(".kenburn-video-button");var s=t.closest(".slide_container").parent().find(".kenburn-video-overlay");var o=parseInt(i.css("width"),0);var u=parseInt(i.css("height"),0);var a=parseInt(t.closest(".slide_container").css("width"),0);var f=parseInt(t.closest(".slide_container").css("height"),0);i.css({left:a/2-o/2+"px",top:f/2-u/2+"px"});i.data("top",n);i.data("url",t.html());t.remove();s.data("origopa",s.css("opacity"));i.hover(function(){var t=e(this);var n=t.parent().find(".kenburn-video-overlay");if(e.browser.msie)n.animate({opacity:"0.5"},{duration:100});else n.cssAnimate({opacity:"0.5"},{duration:100});if(e.browser.version>7&&e.browser.version<9){n.css({display:"block"})}},function(){var t=e(this);var n=t.parent().find(".kenburn-video-overlay");if(e.browser.msie)n.animate({opacity:n.data("origopa")},{duration:100});else n.cssAnimate({opacity:n.data("origopa")},{duration:100});if(e.browser.msie&&e.browser.version>7&&e.browser.version<9){n.css({display:"none"})}});i.click(function(){var t=e(this);var n=t.data("top");var i=n.find(".slide_mainmask");i.addClass("videoon");n.data("currentSlide").animate({top:r.height+"px"},{duration:500,queue:false});n.find(".slide_mainmask").append('<div class="video_kenburn" style="z-index:9999;width:'+r.width+"px;height:"+r.height+'px">'+t.data("url")+"</div>");var s=n.find(".slide_mainmask .video_kenburn");s.css({top:0-r.height+"px"});if(r.videoWasOn==1)s.animate({top:"0px"},{duration:0,queue:false});else s.animate({top:"0px"},{duration:500,queue:false});s.find("* .close").click(function(){var e=n.find(".slide_mainmask");e.removeClass("videoon");n.data("currentSlide").animate({top:"0px"},{duration:600,queue:false});s.animate({top:0-r.height+"px"},{duration:600,queue:false});setTimeout(function(){s.remove()},600)})})})}})}function o(n,r){n.append('<div class="kenburn-bg" style="z-index:7;position:absolute;top:0px;left:0px;width:'+r.width+"px;height:"+r.height+'px;overflow:hidden"></div>');var i=n.find(".kenburn-bg");r.padtop=0;r.padleft=0;r.padright=0;r.padbottom=0;r.botop=0;r.boleft=0;r.boright=0;r.bobottom=0;if(e.browser.msie){if(i.css("paddingTop")!=t&&i.css("paddingTop")!=null)if(i.css("paddingTop").length>0)r.padtop=parseInt(i.css("paddingTop"),0);if(i.css("paddingLeft")!=t&&i.css("paddingLeft")!=null)if(i.css("paddingLeft").length>0)r.padleft=parseInt(i.css("paddingLeft"),0);if(i.css("paddingRight")!=t&&i.css("paddingRight")!=null)if(i.css("paddingRight").length>0)r.padright=parseInt(i.css("paddingRight"),0);if(i.css("paddingBottom")!=t&&i.css("paddingBottom")!=null)if(i.css("paddingBottom").length>0)r.padbottom=parseInt(i.css("paddingBottom"),0);if(i.css("borderTopWidth")!=t&&i.css("borderTopWidth")!=null)if(i.css("borderTopWidth").length>0)r.botop=parseInt(i.css("borderTopWidth"),0);if(i.css("borderLeftWidth")!=t&&i.css("borderLeftWidth")!=null)if(i.css("borderLeftWidth").length>0)r.boleft=parseInt(i.css("borderLeftWidth"),0);if(i.css("borderRightWidth")!=t&&i.css("borderRightWidth")!=null)if(i.css("borderRightWidth").length>0)r.boright=parseInt(i.css("borderRightWidth"),0);if(i.css("borderBottomWidth")!=t&&i.css("borderBottomWidth")!=null)if(i.css("borderBottomWidth").length>0)r.bobottom=parseInt(i.css("borderBottomWidth"),0)}else{if(i.css("paddingTop").length>0)r.padtop=parseInt(i.css("paddingTop"),0);if(i.css("paddingLeft").length>0)r.padleft=parseInt(i.css("paddingLeft"),0);if(i.css("paddingRight").length>0)r.padright=parseInt(i.css("paddingRight"),0);if(i.css("paddingBottom").length>0)r.padbottom=parseInt(i.css("paddingBottom"),0);if(i.css("borderTopWidth").length>0)r.botop=parseInt(i.css("borderTopWidth"),0);if(i.css("borderLeftWidth").length>0)r.boleft=parseInt(i.css("borderLeftWidth"),0);if(i.css("borderRightWidth").length>0)r.boright=parseInt(i.css("borderRightWidth"),0);if(i.css("borderBottomWidth").length>0)r.bobottom=parseInt(i.css("borderBottomWidth"),0)}}function u(t,n){var r=t.find("ul >li").length;var i=n.thumbAmount*n.thumbWidth;n.thumbmaxwidth=i;var s=n.thumbHeight;var o=i;var u=s;var a=n.width+n.padleft+n.padright;var f=Math.round(a/2-o/2);var l=r*n.thumbWidth;t.append('<div class="kenburn_thumb_container" style="position:absolute;left:'+f+"px;top:"+(1+n.height+n.padtop+n.padbottom)+"px;width:"+(o+2)+"px;height:"+(u+2)+'px;"></div>');var c=t.find(".kenburn_thumb_container");if(n.hideThumbs=="on")c.css({opacity:0});if(n.thumbAmount==0)c.css({visibility:"hidden"});c.append('<div class="kenburn_thumb_container_bg" style="position:absolute;left:1px;top:0px;width:'+o+"px;height:"+u+'px"></div>');c.append('<div id="thumbmask" style="overflow:hidden;position:absolute;top:0px;left:1px; width:'+i+"px;	height:"+n.thumbHeight+'px;overflow:hidden;"></div>');var p=c.find("#thumbmask");p.append('<div class="thumbsslide" style="width:'+l+'px"></div>');var d=p.find(".thumbsslide");c.hover(function(){e(this).addClass("overme");c.animate({opacity:1},{duration:300,queue:false})},function(){e(this).removeClass("overme");var r=t.find(".slide_mainmask");setTimeout(function(){if(n.hideThumbs=="on"&&!r.hasClass("overon")&&!e("body").hasClass("tp_showthumbsalways")){c.animate({opacity:0},{duration:300,queue:false})}},10)});t.find("ul >li").each(function(i){var s=e(this);var o=s.find("img:first");var u=o.data("thumb");var a=s.find(".slide_container").data("video")==1;var f=e('<div class="kenburn-thumbs" id="thumb'+i+'" style="cursor:pointer;position:absolute;top:0px;left:'+i*n.thumbWidth+"px;width:"+n.thumbWidth+"px;height:"+n.thumbHeight+"px;background:url("+u+');"></div>');f.data("id",i);var l=e('<div class="overlay"></div>');f.append(l);if(i==r)f.css({"margin-right":"0px"});d.append(f);if(i==n.lastThumb){f.addClass("selected");f.find(".overlay").css({opacity:0})}else{f.find(".overlay").css({opacity:.75});f.removeClass("selecte")}if(a&&n.thumbVideoIcon=="on"){var c=e('<div class="video"></div>');f.append(c);f.find(".video").css({position:"absolute",top:n.thumbHeight/2+"px",left:n.thumbWidth/2+"px","z-index":"1000"})}var p=d.find("#thumb"+i);p.hover(function(){var t=e(this);t.stop();t.find(".overlay").animate({opacity:0},{duration:300,queue:false})},function(){var t=e(this);t.stop();if(!t.hasClass("selected"))t.find(".overlay").animate({opacity:.75},{duration:300,queue:false})});p.click(function(){var i=e(this);if(i.position().left+n.thumbWidth==n.thumbmaxwidth&&i.index()!=r-1){i.parent().find(".kenburn-thumbs").each(function(){var t=e(this);t.cssAnimate({left:t.position().left-n.thumbWidth+"px"},{duration:300,queue:false})})}if(i.position().left==0&&i.index()>0){i.parent().find(".kenburn-thumbs").each(function(){var t=e(this);t.cssAnimate({left:t.position().left+n.thumbWidth+"px"},{duration:300,queue:false})})}if(!i.hasClass("selected")){var s=t.find("ul li:eq("+i.data("id")+")");h(t.data("currentSlide"),s,t,n)}})});n.thumbVertical="bottom";if(n.thumbVertical=="bottom"){c.css({"z-index":1e3,top:n.thumbYOffset+(n.height-n.thumbHeight)+"px"})}else{if(n.thumbVertical=="center"){c.css({"z-index":1e3,top:n.thumbYOffset+(n.height/2-n.thumbHeight/2)+"px"})}else{c.css({"z-index":1e3,top:n.thumbYOffset+"px"})}}if(n.thumbHorizontal=="left"){c.css({left:n.thumbXOffset+"px"})}else{if(n.thumbHorizontal=="right"){c.css({left:n.thumbXOffset+(n.width-i)+"px"})}else{c.css({left:n.thumbXOffset+c.position().left+"px"})}}if(n.hideThumbs=="on"){c.removeClass("overme");var v=t.find(".slide_mainmask");setTimeout(function(){if(n.hideThumbs=="on"&&!v.hasClass("overon")&&!e("body").hasClass("tp_showthumbsalways")){c.animate({opacity:0},{duration:0,queue:false})}},10)}}function a(t,n){var r=t.find("ul >li").length;var i=n.width+n.padleft+n.padright;t.append('<div class="thumbbuttons"><div class="grainme"><div class="leftarrow"></div><div class="thumbs"></div><div class="rightarrow"></div></div></div>');var s=t.find(".leftarrow");var o=t.find(".rightarrow");o.click(function(){var e=t.data("currentSlide");if(e.index()<n.maxitem-1){var r=t.find("ul li:eq("+(e.index()+1)+")")}else{var r=t.find("ul li:first")}h(e,r,t,n)});s.click(function(){var e=t.data("currentSlide");if(e.index()>0){var r=t.find("ul li:eq("+(e.index()-1)+")")}else{var r=t.find("ul li:eq("+(n.maxitem-1)+")")}h(e,r,t,n)});var u=t.find(".thumbs");t.find("ul >li").each(function(r){var i=e(this);var s=e('<div class="minithumb" id="minithumb'+r+'"></div>');s.data("id",r);u.append(s);s.click(function(){var r=e(this);if(!r.hasClass("selected")){var i=t.find("ul li:eq("+r.data("id")+")");h(t.data("currentSlide"),i,t,n)}})});u.waitForImages(function(){var e=parseInt(u.parent().parent().css("top"),0);u.parent().parent().css({top:e+n.bulletYOffset+"px",left:i/2-parseInt(u.parent().width(),0)/2+n.bulletXOffset+"px"})})}function f(n,r){if(e.browser.msie){n.find(".kenburn-preloader").animate({opacity:"0.0"},{duration:300,queue:false})}else{n.find(".kenburn-preloader").cssAnimate({opacity:"0.0"},{duration:300,queue:false})}setTimeout(function(){n.find(".kenburn-preloader").remove()},300);if(r.lastThumb==t)r.lastThumb=0;var i=n.find("ul li:eq("+r.lastThumb+")");h(i,i,n,r);l(n,r);r.loaded=1;if(r.videoWasOn==1)n.parent().find(".kenburn-video-button").click();r.videoWasOn=-1}function l(t,n){var r=t.find(".slide_mainmask");r.data("maxwidth",n.width+n.padleft+n.padright);r.data("maxheight",n.height+n.padtop+n.padbottom);r.data("pdistance",n.parallaxX);r.data("pdistancey",n.parallaxY);r.data("cdistance",n.captionParallaxX);r.data("cdistancey",n.captionParallaxY);r.data("opt",n);var i=r.parent().data("currentSlide");var s=r.find(".parallax_container");var o=i.find(".layer_container");r.mouseenter(function(r){var i=e(this);var s=i.parent().find(".kenburn_thumb_container #thumbmask");var o=i.parent().data("currentSlide");var u=o.find(".parallax_container");var a=o.find(".layer_container");i.addClass("overon");clearTimeout(n.hideThumb);t.find(".kenburn_thumb_container").animate({opacity:1},{duration:300,queue:false})});r.mouseleave(function(r){var i=e(this);var s=i.parent().data("currentSlide");var o=s.find(".parallax_container");var u=s.find(".layer_container");i.removeClass("overme");i.removeClass("overon");var a=t.find(".kenburn_thumb_container");setTimeout(function(){if(n.hideThumbs=="on"&&!a.hasClass("overme")&&!e("body").hasClass("tp_showthumbsalways")){t.find(".kenburn_thumb_container").animate({opacity:0},{duration:300,queue:false})}},10)});r.mousemove(function(r){var i=e(this);if(n.pauseOnRollOverMain!="off")i.addClass("overme");var s=i.parent().find(".kenburn_thumb_container #thumbmask");t.find(".kenburn_thumb_container").css({display:"block"});if(!s.hasClass("overme")&&!i.hasClass("overon")){var o=i.parent().data("currentSlide");var u=o.find(".parallax_container");var a=o.find(".layer_container")}else{setTimeout(function(){i.removeClass("overon")},100)}})}function c(){var e="";var t=Math.floor(Math.random()*3);var n=Math.floor(Math.random()*3);if(t==0)e="left";else if(t==1)e="center";else e="right";if(n==0)e=e+",top";else if(n==1)e=e+",center";else e=e+",bottom";return e}function h(n,r,i,s){clearInterval(s.aktKenInterval);var o=false;i.find("ul >li").each(function(t){var i=e(this);clearInterval(i.data("interval"));if(i.index()!=n.index()&&i.index()!=r.index()){i.css({display:"none",position:"absolute",left:"0px","z-index":"994"})}});var u=i.find(".slide_mainmask .video_kenburn");setTimeout(function(){u.remove()},600);var a=i.find(".slide_mainmask");a.removeClass("videoon");n.css({position:"absolute",top:"0px",left:"0px","z-index":"900"});r.css({position:"absolute",top:"0px",left:"0px","z-index":"1000"});r.css({display:"block"});var f=r.find("img:first");var l=r.find(".bw-main-image");var h=true;if(r.data("kenburn")=="off"||navigator.userAgent.match(/Android/i)){L=false;h=false;r.data("startalign","center,center");r.data("endalign","center,center");r.data("zoom","none");r.data("zoomfact",0)}if(r.data("ww")==t){var d=r.find("img").width();var m=r.find("img").height();if(d!=0){if(f.width()>0&&f.width()<s.width){var g=s.width/d;d=d*g;m=m*g}if(f.height()>0&&f.height()<s.height){var g=s.height/m;d=d*g;m=m*g}r.data("ww",d);r.data("hh",m)}}else{var d=r.data("ww");var m=r.data("hh")}d=d*s._propw;m=m*s._proph;var y=0;var b=0;var w=0;var E=0;if(h){var S=r.data("startalign");var x=r.data("endalign");if(S=="random")S=c();if(x=="random")x=c();if(S!=t){var T=S;var N=T.split(",")[0];var C=T.split(",")[1];if(N=="left")b=0;else if(N=="center")b=s.width/2-d/2;else if(N=="right")b=0-Math.abs(s.width-d);if(C=="top")y=0;else if(C=="center")y=s.height/2-m/2;else if(C=="bottom")y=0-Math.abs(s.height-m)}if(x!=t){var k=x;var N=k.split(",")[0];var C=k.split(",")[1];if(N=="left")E=0;else if(N=="center")E=s.width/2-d/2;else if(N=="right")E=0-Math.abs(s.width-d);if(C=="top")w=0;else if(C=="center")w=s.height/2-m/2;else if(C=="bottom")w=0-Math.abs(s.height-m)}}clearInterval(n.data("interval"));f.parent().find(".canvas-now").remove();f.parent().find(".canvas-now-bw").remove();if(h){var L=p();var A=e.browser.msie&&e.browser.version<9;if(A)L=false}var O=true;if(r.find(".creative_layer div").length>0){var M=r.find(".creative_layer div").outerWidth();var _=r.find(".creative_layer div").outerHeight();var D=r.find(".creative_layer div").position().top;var P=r.find(".creative_layer div").position().left}else{O=false;var M=0;var _=0;var D=0;var P=0;l.remove()}if(L){f.parent().append('<div style="position:absolute;z-index:1" class="canvas-now"><canvas class="canvas-now-canvas" width="'+d+'" height="'+m+'"></canvas></div>');f.css({display:"none"});var H=f.parent().find(".canvas-now-canvas")[0];var B=H.getContext("2d");if(l.length>0){f.parent().append('<div style="position:absolute;z-index:20" class="canvas-now-bw"><canvas class="canvas-now-canvas-bw" width="'+d+'" height="'+m+'"></canvas></div>');l.css({display:"none"});var j=f.parent().find(".canvas-now-canvas-bw")[0];f.parent().find(".canvas-now-bw").wrap('<div class="blurwrap" style="width:'+M+"px;height:"+_+"px;position:absolute;top:"+D+"px;left:"+P+'px;overflow:hidden"></div>');var F=j.getContext("2d")}}else{if(l.parent().hasClass("blurwrap")){}else{l.wrap('<div class="blurwrap" style="width:'+M+"px;height:"+_+"px;position:absolute;top:"+D+"px;left:"+P+'px;overflow:hidden;"></div>')}}f.css({"-webkit-transform":"translateZ(0)"});l.css({"-webkit-transform":"translateZ(0)"});var I=r.data("panduration");var q=0;var R=0;var U=d;var z=m;var W=r.data("zoomfact");var X=r.data("zoom");if(X=="random"){if(Math.floor(Math.random()*2)==0)X="out";else X="in"}if(r.data("zoomfact")=="random"){W=Math.random()*1+1}if(X=="out"){U=U*W;z=z*W;b=b*W;y=y*W}var V=(E-b)/(I*25);var J=(w-y)/(I*25);var K=1/(I*25);q=d*W/(I*25)/10;R=m*W/(I*25)/10;if(X=="out"){q=q*-1;R=R*-1}if(r.data("endalign")!=t){var k=r.data("endalign");var N=k.split(",")[0];var C=k.split(",")[1];if(N=="left")V=V+q/4;else if(N=="center")V=V-q/2;else if(N=="right")V=V-q;if(C=="top")J=J+R/4;else if(C=="center")J=J-R/2;else if(C=="bottom")J=J-R}if(s.timer>parseInt(r.data("panduration"),0)*10){s.timer=parseInt(r.data("panduration"),0)*10}else{s.timer=s.savedTimer*10}f.parent().find(".canvas-now-bw").css({opacity:0});if(L){B.drawImage(f[0],b,y,U,z);if(l.length>0&&O){F.drawImage(l[0],b,y,U,z);setTimeout(function(){f.parent().find(".canvas-now-bw").cssAnimate({opacity:"1.0"},{duration:1e3,queue:false})},1200)}}f.cssStop(true,true);l.cssStop(true,true);if(h){f.css({position:"absolute",left:b+"px",top:y+"px",width:U+"px",height:z+"px",opacity:1});l.css({position:"absolute",left:b+"px",top:y+"px",width:U+"px",height:z+"px",opacity:1});var Q=b;var G=y;var Y=U;step=0}else{var Z=s.width/U;var et=s.height/z;if(Z>et){U=s.width;z=z*Z}else{U=U*et;z=s.height}f.css({position:"absolute",left:b+"px",top:y+"px",width:U+"px",height:z+"px",opacity:1});l.css({position:"absolute",left:b-P+"px",top:y-D+"px",width:U+"px",height:z+"px",opacity:0});setTimeout(function(){l.animate({opacity:"1.0"},{duration:1e3,queue:false})},1200)}if(h){s.aktKenInterval=setInterval(function(){e("body").find(".testinfo").html(s.aktKenInterval+"  "+Math.floor(Math.random()*1e4));if(!i.parent().parent().find(".kenburn_thumb_container #thumbmask").hasClass("overme")&&!i.find(".slide_mainmask").hasClass("overme")&&!i.find(".slide_mainmask").hasClass("videoon")){U=U+q;z=z+R;b=b+V;y=y+J;if(b>0)b=0;if(y>0)y=0;if(b<s.width-U)b=s.width-U;if(y<s.height-z)y=s.height-z;if(L){B.drawImage(f[0],b,y,U,z);if(l.length>0)F.drawImage(l[0],b-P,y-D,U,z)}else{var t=U/Y;var n=b-Q;var r=y-G;var o=b-Q-P;var u=y-G-D;if(jQuery.browser.msie){f.css({filter:'progid:DXImageTransform.Microsoft.Matrix(FilterType="bilinear",M11='+t+",M12=0,M21=0,M22="+t+",Dx="+n+",Dy="+r+")"});f.css({"-ms-filter":'progid:DXImageTransform.Microsoft.Matrix(FilterType="bilinear",M11='+t+",M12=0,M21=0,M22="+t+",Dx="+n+",Dy="+r+")"});l.remove()}else{f.cssAnimate({left:b+"px",top:y+"px",width:U+"px",height:z+"px"},{duration:38,easing:"linear",queue:false});if(l.length>0){l.cssAnimate({left:b+"px",top:y+"px",width:U+"px",height:z+"px"},{duration:38,easing:"linear",queue:false})}}}}},40)}var tt=/chrome/.test(navigator.userAgent.toLowerCase());if(tt&&s.repairChromeBug=="on"){r.data("transition","slide")}if(n.index()!=r.index()){setTimeout(function(){n.find(".canvas-now-bw").css({visibility:"hidden"})},0)}if(r.data("transition")=="slide"){if(o==false){var nt=true;if(n.index()>r.index())nt=false;if(nt){u.animate({left:0-s.width+"px"},{duration:600,queue:false});r.find(".slide_container").stop(true,true);r.find(".slide_container").css({opacity:"1.0",left:s.width+"px"});n.find(".slide_container").animate({left:0-s.width+"px"},{duration:600,queue:false});r.find(".slide_container").animate({left:"0px",top:"0px",opacity:"1.0"},{duration:600,queue:false})}else{u.animate({left:s.width+"px"},{duration:600,queue:false});r.find(".slide_container").stop(true,true);r.find(".slide_container").css({opacity:"1.0",position:"absolute",top:"0px",left:0-s.width+"px"});n.find(".slide_container").animate({left:s.width+"px"},{duration:600,queue:false});r.find(".slide_container").animate({left:"0px",top:"0px",opacity:"1.0"},{duration:600,queue:false})}}}else{n.find(".slide_container").stop(true,true);n.find(".slide_container").animate({opacity:"0"},{duration:600,queue:false});u.animate({opacity:"0.0"},{duration:600,queue:false});r.find(".slide_container").stop(true,true);r.find(".slide_container").css({opacity:"0.0",left:"0px",top:"0px"});r.find(".slide_container").animate({opacity:"1.0"},{duration:600,queue:false})}if(i.find(".kenburn_thumb_container").length>0){var rt=i.find(".kenburn_thumb_container #thumbmask .thumbsslide #thumb"+r.index());i.find(".kenburn_thumb_container #thumbmask .thumbsslide #thumb"+n.index()).each(function(t){var n=e(this);if(n.attr("id")!="thumb"+r.index()){n.removeClass("selected");n.stop();n.find(".overlay").animate({opacity:.75},{duration:300,queue:false})}});rt.addClass("selected");rt.find(".overlay").animate({opacity:0},{duration:300,queue:false});i.data("currentThumb",rt);s.currentThumb=rt.index();if(rt.position().left+s.thumbWidth==s.thumbmaxwidth&&rt.index()!=s.maxitem-1){rt.parent().find(".kenburn-thumbs").each(function(){var t=e(this);t.cssAnimate({left:t.position().left-s.thumbWidth+"px"},{duration:300,queue:false})})}if(rt.position().left==0&&rt.index()>0){rt.parent().find(".kenburn-thumbs").each(function(){var t=e(this);t.cssAnimate({left:t.position().left+s.thumbWidth+"px"},{duration:300,queue:false})})}if(rt.index()==0){rt.parent().find(".kenburn-thumbs").each(function(){var t=e(this);t.cssAnimate({left:0+t.index()*s.thumbWidth+"px"},{duration:300,queue:false})})}}if(i.find(".minithumb").length>0){var rt=i.find("#minithumb"+r.index());i.find(".minithumb").removeClass("selected");rt.addClass("selected");if(s.thumbStyle!="both")i.data("currentThumb",rt);s.currentThumb=rt.index()}i.data("currentSlide",r);v(r,100,i);s.cd=0}function p(){var e=document.createElement("canvas");return!!(e.getContext&&e.getContext("2d"))}function d(n,r){r.cd=0;if(e.browser.msie)n.find(".kenburn_thumb_container #thumbmask .thumbsslide").cssAnimate({left:"0px"},{duration:300,queue:false});else n.find(".kenburn_thumb_container #thumbmask .thumbsslide").animate({left:"0px"},{duration:300,queue:false});var i=n.find(".kenburn_thumb_container #thumbmask");var s=i.find(".thumbsslide");var o=n.find(".slide_mainmask");var o=n.find(".slide_mainmask");r.timerinterval=setInterval(function(){if(r.loaded==1){var i=n.data("currentSlide");var u=n.data("currentThumb");if(!o.hasClass("overme")&&!o.hasClass("videoon")){r.cd=r.cd+1;if(r.cd==r.timer){r.cd=0;if(i!=t){if(i.index()<r.maxitem-1){var a=n.find("ul li:eq("+(i.index()+1)+")");h(i,a,n,r);if(r.thumbStyle!="none"){var f=0-parseInt(u.parent().css("left"),0);if(s!=null&&s!=t){s.css({position:"absolute"});if(Math.abs(f)<=n.data("thumbnailmaxdif")){if(e.browser.msie)s.animate({left:f+"px"},{duration:300,queue:false});else s.cssAnimate({left:f+"px"},{duration:300,queue:false})}else{f=0-n.data("thumbnailmaxdif");if(e.browser.msie)s.animate({left:f+"px"},{duration:300,queue:false});else s.cssAnimate({left:f+"px"},{duration:300,queue:false})}}}}else{h(i,n.find("ul li:first"),n,r);if(s!=null&&s!=t){if(e.browser.msie)s.animate({left:"0px"},{duration:300,queue:false});else s.cssAnimate({left:"0px"},{duration:300,queue:false})}}}}}}},100)}function v(n,r,i){var s=2;n.find(".creative_layer div").each(function(n){var i=e(this);if(i.data("_top")==t)i.data("_top",i.position().top);if(i.data("_left")==t)i.data("_left",i.position().left);if(i.data("_op")==t){i.data("_op",i.css("opacity"))}i.css({"z-index":1200});if(i.hasClass("fadeup")){i.animate({top:i.data("_top")+20+"px",opacity:0},{duration:0,queue:false}).delay(r+(s+1)*350).animate({top:i.data("_top")+"px",opacity:i.data("_op")},{duration:500,queue:true});s++}if(i.hasClass("faderight")){i.animate({left:i.data("_left")-20+"px",opacity:0},{duration:0,queue:false}).delay(r+(s+1)*350).animate({left:i.data("_left")+"px",opacity:i.data("_op")},{duration:500,queue:true});s++}if(i.hasClass("fadedown")){i.animate({top:i.data("_top")-20+"px",opacity:0},{duration:0,queue:false}).delay(r+(s+1)*350).animate({top:i.data("_top")+"px",opacity:i.data("_op")},{duration:500,queue:true});s++}if(i.hasClass("fadeleft")){i.animate({left:i.data("_left")+20+"px",opacity:0},{duration:0,queue:false}).delay(r+(s+1)*350).animate({left:i.data("_left")+"px",opacity:i.data("_op")},{duration:500,queue:true});s++}if(i.hasClass("fade")){i.animate({opacity:0},{duration:0,queue:false}).delay(r+(s+1)*350).animate({opacity:i.data("_op")},{duration:500,queue:true});s++}})}e.fn.extend({kenburn:function(r){var i={responsive:"on",noresponsiveWidth:600,noresponsiveHeight:300,fixHeight:false,thumbWidth:50,thumbHeight:50,thumbAmount:6,thumbStyle:"bullet",thumbXOffset:0,thumbYOffsetm:0,bulletXOffset:0,bulletYOffset:0,shadow:"true",timer:2e3,touchenabled:"on",pauseOnRollOverThumbs:"off",pauseOnRollOverMain:"on",preloadedSlides:50,googleFonts:"PT+Sans+Narrow:400,700",googleFontJS:"http://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js",debug:"no",rescaleBGColor:"#333"};r=e.extend({},i,r);WebFontConfig={google:{families:[r.googleFonts]},active:function(){jQuery("body").data("googlefonts","loaded")},inactive:function(){jQuery("body").data("googlefonts","loaded")}};return this.each(function(){var i=r;if(i.vCorrection==t)i.vCorrection=10;if(i.hCorrection==t)i.hCorrection=10;if(i.debug=="yes"||i.debug=="on")e("body").append('<div class="testinfo" style="z-index:99999;position:fixed;background:#000;color:#fff;width:700px;height:200px;top:10px;left:10px;"></div>');if(i.googleFonts!=t&&i.googleFonts.length>0){var s=document.createElement("script");s.src=i.googleFontJS;s.type="text/javascript";s.async="true";var o=document.getElementsByTagName("script")[0];o.parentNode.insertBefore(s,o);jQuery("body").data("googlefonts","wait")}else{jQuery("body").data("googlefonts","loaded")}i.savedTimer=i.timer;var u=e(this);if(u.attr("id")==t)u.attr("id",Math.round(Math.random()*1e5));var a=u.css("minWidth");var f=u.css("maxWidth");i.whproportion=parseInt(u.css("height"),0)/parseInt(u.css("maxWidth"),0);i.width=u.width()-i.hCorrection;i.height=u.height()-i.vCorrection;if(!i.fixHeight||!i.fixHeight=="true"){i.height=i.width*i.whproportion}i.originalwidth=parseInt(u.css("maxWidth"),0);i.originalheight=parseInt(u.css("height"),0);if(!i.fixHeight||!i.fixHeight=="true"){i._propw=i.width/i.originalwidth;i._proph=i.height/i.originalheight}else{i._propw=1;i._proph=1}u.height(i.height+i.vCorrection);i.oldid="responsive"+u.attr("id");u.wrap('<div id="'+i.oldid+'" class="responsiveholder"></div>');i.fullHTML=e("body").find("#"+i.oldid).html();var l=true;if(a==f||f=="none")l=false;if(i.responsive=="off"){l=false;i.width=i.noResponsiveWidth;i.height=i.noResponsiveHeight}if(i.width<500&&l&&!i.fixHeight){i._propw=i._propw*1.7;i._proph=i._proph*1.7}n(u,i);i.videoWasOn=-1;if(l)e(window).resize(function(){if(u.find(".videoon").length>0&&i.videoWasOn==-1){i.videoWasOn=1}else{if(i.videoWasOn==-1)i.videoWasOn=0}clearInterval(i.aktKenInterval);clearInterval(i.timerinterval);clearInterval(i.waitForWF);clearTimeout(i.resetAll);i.width=u.width()-i.hCorrection;if(!i.fixHeight||!i.fixHeight=="true"){i.height=i.width*i.whproportion;i._propw=i.width/i.originalwidth;i._proph=i.height/i.originalheight}if(i.width<500&&l&&!i.fixHeight){i._propw=i._propw*1.7;i._proph=i._proph*1.7}i.preloadedSlides=200;u.empty();u.remove();e("body").find("#"+i.oldid).append(i.fullHTML);u=e("body").find("#"+i.oldid).find("div:first");u.height(i.height+i.vCorrection);i.resetAll=setTimeout(function(){n(u,i)},200)})})}})})(jQuery)