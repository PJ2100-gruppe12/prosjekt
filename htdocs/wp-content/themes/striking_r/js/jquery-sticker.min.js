/*! jQuery Sticker - v0.6.6 - 2014-01-25
* https://github.com/amazingSurge/jquery-sticker
* Copyright (c) 2014 amazingSurge; Licensed GPL */
!function(a,b,c,d){"use strict";var e=c(a),f=e.height(),g={count:0,started:!1,instances:[],types:{},generateId:function(){return this.count++,this.count},scroll:function(){c.each(g.instances,function(a,b){b.enabled&&(g.types[b.type].scroll(b),c.isFunction(b.options.scroll)&&b.options.scroll.call(b))})},resize:function(){f=e.height(),c.each(g.instances,function(a,b){b.enabled&&(g.types[b.type].resize(b),g.types[b.type].scroll(b),c.isFunction(b.options.resize)&&b.options.resize.call(b))})},start:function(){this.started||(e.on("scroll",this.scroll),e.on("resize",this.resize),this.started=!0)},stop:function(){this.started=!1,e.off("scroll",this.scroll),e.off("resize",this.resize)}},h=c.Sticker=function(a,b){this.element=a,this.$element=c(a),this.type=b.type!==d?b.type:h.defaults.type,this.options=c.extend({},h.defaults,g.types[this.type].defaults,b),this.enabled=!1,this.sticky=!1;var e=this.options.namespace;this.classes={},this.classes.wrapper=e+"-wrapper",this.classes.enabled=e+"_enabled",this.classes.sticky=e+"_sticky",this.components={},this.init()};h.defaults={namespace:"sticker",type:"top",init:null,destroy:null,scroll:null,resize:null,enable:null,disable:null,sticky:null,unsticky:null},h.registerType=function(a,b){g.types[a]=b},h.prototype={constructor:h,init:function(){this.id=g.generateId();var a=c("<div></div>").addClass(this.classes.wrapper),b=this.$element.attr("id");"undefined"!=typeof b&&a.attr("id",b+"-"+this.options.namespace+"-wrapper"),this.$element.wrapAll(a),this.$wrapper=this.$element.parent(),g.types[this.type].init(this),c.isFunction(this.options.init)&&this.options.init.call(this),this.enable(),g.instances.push(this),g.start()},destroy:function(){this.$element.unwrap();for(var a in g.instances)g.instances[a].id===this.id&&g.instances.splice(a,1);0===g.instances.length&&g.stop(),c.isFunction(this.options.destroy)&&this.options.destroy.call(this)},enable:function(){this.enabled=!0,g.types[this.type].enable(this),this.$wrapper.addClass(this.classes.enabled),g.types[this.type].scroll(this),c.isFunction(this.options.enable)&&this.options.enable.call(this)},disable:function(){this.enabled=!1,this.sticky=!1,g.types[this.type].disable(this),this.$wrapper.removeClass(this.classes.sticky).removeClass(this.classes.enabled),c.isFunction(this.options.disable)&&this.options.disable.call(this)},on:function(a,b){"string"==typeof a&&"function"==typeof b&&(this.options[a]=b)},off:function(a){"string"==typeof a&&(this.options[a]=null)},set:function(a,b){this.options[a]=b},update:function(){this.enabled&&g.types[this.type].scroll(this)}},h.registerType("top",{defaults:{topSpace:0},init:function(){},scroll:function(a){var b=e.scrollTop(),d=a.$wrapper.offset().top,f=a.options.topSpace;f>d&&d>=0&&(f=d);var g=d-f-b;0>g?a.sticky||(a.sticky=!0,a.$wrapper.addClass(a.classes.sticky),a.$element.css({position:"fixed",top:f}),c.isFunction(a.options.sticky)&&a.options.sticky.call(a)):a.sticky&&(a.sticky=!1,a.$wrapper.removeClass(a.classes.sticky),a.$element.css({position:"",top:""}),c.isFunction(a.options.unsticky)&&a.options.unsticky.call(a))},resize:function(a){a.$wrapper.css("height",a.$element.outerHeight(!0))},enable:function(a){a.$wrapper.css("height",a.$element.outerHeight(!0))},disable:function(a){a.$element.css({position:"",top:""}),a.$wrapper.css("height","")}}),h.registerType("fill",{defaults:{useFlex:!0,check:!0,callback:null},init:function(a){a.options.useFlex&&this.vhSupport()&&this.flexSupport()||(a.options.useFlex=!1),a.paddingBottom=parseInt(a.$element.css("padding-bottom"),10)},scroll:function(a){if(!a.options.useFlex){var b=e.scrollTop(),d=c("body").height();0===b&&f>=d?a.sticky||(a.sticky=!0,a.$wrapper.addClass(a.classes.sticky),a.$element.css("padding-bottom",f-d+a.paddingBottom),c.isFunction(a.options.sticky)&&a.options.sticky.call(a)):a.sticky&&(a.sticky=!1,a.$wrapper.removeClass(a.classes.sticky),a.$element.css("padding-bottom",""),c.isFunction(a.options.unsticky)&&a.options.unsticky.call(a)),c.isFunction(a.options.callback)&&a.options.callback.call(a,b,d,f)}},resize:function(a){a.options.useFlex||(a.$element.css("padding-bottom",""),a.paddingBottom=parseInt(a.$element.css("padding-bottom"),10),a.sticky=!1)},enable:function(a){if(a.options.useFlex)a.$wrapper.parent().addClass(a.options.namespace+"_fill-container"),a.$wrapper.addClass(a.options.namespace+"_fill");else if(a.options.check){var b=c("body").height();a.checkInterval=setInterval(function(){b!==c("body").height()&&(g.types[a.type].scroll(a),b=c("body").height())},500)}},disable:function(a){a.options.useFlex?(a.$wrapper.parent().removeClass(a.options.namespace+"-fill-container"),a.$wrapper.removeClass(a.options.namespace+"-fill")):(a.options.check&&clearInterval(a.checkInterval),a.$element.css("padding-bottom",""))},flexSupport:function(){var a=b.body||b.documentElement,c=a.style,d="boxDirection";if("string"==typeof c[d])return!0;for(var e=["Moz","Webkit","Khtml","O","ms"],d=d.charAt(0).toUpperCase()+d.substr(1),f=0;f<e.length;f++)if("string"==typeof c[e[f]+d])return!0;return!1},vhSupport:function(){var b=c('<div style="height:50vh;visibility:hidden;" />').appendTo("body"),d=parseInt(a.innerHeight/2,10),e=parseInt((a.getComputedStyle?getComputedStyle(b.get(0),null):b.get(0).currentStyle).height,10);return b.remove(),e===d}}),h.registerType("sidebar",{defaults:{topSpace:0,bottom:null,unbottom:null},init:function(){},scroll:function(a){var b,d,f=a.options.topSpace,g=e.scrollTop()+f,h=a.$element.outerHeight(),i=a.$parent.height(),j=parseInt(a.$parent.css("border-top-width"),10),k=parseInt(a.$parent.css("padding-top"),10),l=a.$parent.offset().top+j+k,m=a.$element.offset().top-parseInt(a.$element.css("padding-top"),10);!a.sticky&&g>m?(a.sticky=!0,a.$wrapper.addClass(a.classes.sticky),a.$element.css({position:"fixed",top:f}),c.isFunction(a.options.sticky)&&a.options.sticky.call(a)):a.sticky&&(l>g?(a.sticky=!1,a.$wrapper.removeClass(a.classes.sticky),a.$element.css({position:"",top:"",bottom:""}),c.isFunction(a.options.unsticky)&&a.options.unsticky.call(a)):(b=g+h>i+l,b?(a.bottomed=!0,d=parseInt(a.$parent.css("padding-bottom"),10),a.$element.css({position:"absolute",bottom:d,top:""}),c.isFunction(a.options.bottom)&&a.options.bottom.call(a)):a.bottomed&&(a.bottomed=!1,a.$element.css({position:"fixed",bottom:"",top:f}),c.isFunction(a.options.unbottom)&&a.options.unbottom.call(a))))},resize:function(){},enable:function(a){var b=a.$element.outerHeight(),c=a.$element.outerWidth(!0),d=a.$element.css("float"),e=a.$element.css("display"),f=a.$element.css("vertical-align");"none"==d&&a.$element.width(a.$element.width()),a.$wrapper.css({width:c,height:b,display:e,"vertical-align":f,"float":d}),a.$parent=a.$wrapper.parent(),a.$parent.css("position","relative"),a.bottomed=!1,a.sticky=!1},disable:function(a){a.$wrapper.css({width:"",height:"",display:"","vertical-align":"","float":""}),a.$element.css({position:"",top:""})}}),c.fn.sticker=function(a){if("string"==typeof a){var b=a,e=arguments.length>1?Array.prototype.slice.call(arguments,1):d;return this.each(function(){var a=c.data(this,"sticker");a&&"function"==typeof a[b]&&a[b].apply(a,e)})}return this.each(function(){c.data(this,"sticker")||c.data(this,"sticker",new h(this,a))})}}(window,document,jQuery);