/*! jQuery NavToSelect - v0.2.1 - 2013-09-18
* https://github.com/amazingSurge/jquery-navToSelect
* Copyright (c) 2013 amazingSurge; Licensed GPL */
!function(a,b,c,d){"use strict";var e=function(a,b){this.element=a,this.$element=c(a),this._isBuilded=!1,this.options=c.extend(e.defaults,b);var d=this;c.extend(d,{init:function(){var a=d.getItems();d.build(a),d.$select.on("change",d.options.onChange),d.$element.trigger("navToSelect::ready")},build:function(a){d.$select=c("<select />",{"class":d.options.namespace}).html(d.buildOptions(a,1)),null===d.options.prependTo?d.$element.after(d.$select):d.$select.prependTo(d.options.prependTo),d._isBuilded=!0},buildOption:function(a,b){var c=new Array(b).join(d.options.indentString);return 1!==b&&d.options.indentSpace&&(c+="&nbsp;"),'<option value="'+a.value+'"'+(a.linkable===!1?' data-linkable="false"':"")+(a.actived===!0?' selected="selected"':"")+">"+c+a.label+"</option>"},buildOptions:function(a,b){if(b>d.options.maxLevel)return"";var e="";return c.each(a,function(a,c){c.linkable===!1&&"undefined"!=typeof c.items&&1===b&&d.options.useOptgroup&&(e+='<optgroup label="'+c.label+'">',e+=d.buildOptions(c.items,b+1),e+="</optgroup>"),"undefined"!=typeof c.items?(e+=d.buildOption(c,b),e+=d.buildOptions(c.items,b+1)):e+=d.buildOption(c,b)}),e},getItems:function(){var a=[];return d.options.placeholder&&(a=a.concat({value:"#",label:d.options.placeholder,linkable:!1})),a=a.concat(d.options.getItemsFromList.call(d,d.$element,1))},getItemValue:function(a){return a.find(d.options.linkSelector).attr("href")},isLinkable:function(a){return"#"!==d.getItemValue(a)},isActived:function(a){return a.is("."+d.options.activeClass)},isBuilded:function(){return d._isBuilded}}),this.init()};e.defaults={maxLevel:4,prependTo:null,activeClass:"active",linkSelector:"a:first",indentString:"&ndash;",indentSpace:!0,placeholder:"Navigate to...",useOptgroup:!1,namespace:"navToSelect",getItemLabel:function(a){return a.find(this.options.linkSelector).text()},getItemsFromList:function(a,b){var d=this,e=[];return a.children("li").each(function(){var a=c(this),f={value:d.getItemValue(a),label:d.options.getItemLabel.call(d,a),linkable:d.isLinkable(a),actived:d.isActived(a)};a.children("ul, ol").length&&(f.items=[],a.children("ul, ol").each(function(){f.items=f.items.concat(d.options.getItemsFromList.call(d,c(this),b+1))})),e.push(f)}),e},onChange:function(){c(this).data("linkable")!==!1&&(b.location.href=this.value)}},e.prototype={constructor:e,getSelect:function(){return this.$select},destroy:function(){this.$select.remove(),this.$element.data("NavToSelect",null)}},c.fn.navToSelect=function(a){if("string"==typeof a){var b=a,f=arguments.length>1?Array.prototype.slice.call(arguments,1):d;return this.each(function(){var a=c.data(this,"navToSelect");a&&"function"==typeof a[b]&&a[b].apply(a,f)})}return this.each(function(){var b=c.data(this,"navToSelect");b||(b=new e(this,a),c.data(this,"navToSelect",b))})}}(window,document,jQuery);