/*! jQuery TinySlider - v0.4.0 - 2013-11-23
* https://github.com/amazingSurge/jquery-tinySlider
* Copyright (c) 2013 amazingSurge; Licensed GPL */
(function(t,e,i,n){"use strict";var s=i.TinySlider=function(a,o){this.element=a,this.$element=i(a);var r=[];i.each(this.$element.data(),function(t,e){var i=RegExp("^tinyslider","i");i.test(t)&&(r[t.toLowerCase().replace(i,"")]=e)}),this.options=i.extend(!0,{},s.defaults,o,r);var u=this.options.namespace;this.classes={activeSlide:u+"-slide_active",activePager:u+"-pager_active"},this.$element.addClass(u+"-container"),this.$ul=this.$element.children("ul").addClass(u+"-items"),this.$viewport=this.$ul.wrap('<div class="'+u+'-viewport" />').parent(),this.$slides=this.$ul.children().addClass(u+"-item");var l=this;i.extend(l,{init:function(){l.transition=l.transition(),l.transition.supported||(l.options.useCSS=!1),l.options.useCSS&&(l.$element.addClass(u+"_css"),l.options.cycle=!1),l.options.pager&&this.pager.setup(),l.options.nav&&this.nav.setup(),l.options.random&&(l.$slides.sort(function(){return Math.round(Math.random())-.5}),l.$ul.empty().append(l.$slides)),l.animations[l.options.animation].setup(),l.$viewport.addClass(u+"_"+l.options.animation),l.$viewport.on("go",function(t,e){t.stopPropagation(),l.$viewport.trigger("animation_start",{current:l.current,index:e.index}),l.animations[l.options.animation].run(e),l.current=e.index}),l.current=0,l.wait=null,l.cycle=!1,l.isSliding=!1,l.active(l.current),"function"==typeof l.options.onStart&&l.options.onStart.call(l),l.options.autoplay&&(l.autoplay.enabled=!0,l.autoplay.start()),l.options.pauseOnHover&&l.$viewport.hover(function(){l.autoplay.enabled&&l.pause()},function(){l.autoplay.enabled&&l.play()}),l.options.touch&&l.touch.setup(),l.$viewport.on("animation_start",function(t,e){t.stopPropagation(),l.isSliding=!0,"function"==typeof l.options.onBefore&&l.options.onBefore.call(l,e)}),l.$viewport.on("animation_end",function(t,e){t.stopPropagation(),l.isSliding=!1,l.active(e.index),"function"==typeof l.options.onAfter&&l.options.onAfter.call(l,e),l.wait?l.goTo(l.wait):l.autoplay.enabled&&l.autoplay.start()})},autoplay:{enabled:!1,timeout:null,start:function(){l.autoplay.timeout&&clearTimeout(l.autoplay.timeout),l.autoplay.timeout=setTimeout(function(){l.go()},l.options.delay)},stop:function(){clearTimeout(l.autoplay.timeout)}},active:function(t){l.$slides.removeClass(l.classes.activeSlide).eq(t).addClass(l.classes.activeSlide)},pager:{setup:function(){l.$pager=i('<ul class="'+u+'-pager" />');var t=[];l.$slides.each(function(e){var i=e+1;t+="<li><a href='#'>"+i+"</a>"+"</li>"}),l.$pager.append(t),l.$pager.appendTo(l.$element),l.pager.$items=l.$pager.children(),l.pager.bind()},bind:function(){l.$viewport.on("go",function(t,e){l.pager.active(e.index)}),l.$pager.delegate("li","click",function(){return l.goTo(i(this).index()),!1})},active:function(t){l.pager.$items.removeClass(l.classes.activePager).eq(t).addClass(l.classes.activePager)}},nav:{setup:function(){l.$nav=i('<div class="'+u+'-nav">'+'<a href="#" class="'+u+'-nav-prev">'+l.options.prevText+"</a>"+'<a href="#" class="'+u+'-nav-next">'+l.options.nextText+"</a>"+"</div>"),l.$nav.appendTo(l.$element),l.$nav.delegate("a","click",function(){return i(this).is("."+u+"-nav-prev")?l.prev():l.next(),!1})}},animations:{fade:{setup:function(){},run:function(t){var e=l.$slides.eq(l.current),i=l.$slides.eq(t.index).css("display","block");l.animate(e,{opacity:0},l.options.duration,l.options.easing,function(){e.css("opacity","")}),l.animate(i,{opacity:1},l.options.duration,l.options.easing,function(){i.css({opacity:"",display:""}),l.$viewport.trigger("animation_end",{index:t.index})})}},slide:{setup:function(){var e=l.$viewport.width();l.$slides.width(e),l.$ul.width(100*l.$slides.length+"%"),i(t).on("resize",function(){var t=l.$viewport.width();l.$slides.width(t)})},run:function(t){var e=l.options.duration;t.jump&&(e=Math.floor(e/3,10)),l.cycle?(l.$ul.attr("data-cycle",l.cycle),l.$slides.eq(t.index).css("display","block"),l.$ul.width("200%"),"prev"===l.cycle?(l.$ul.css("marginLeft","-100%"),l.animate(l.$ul,{marginLeft:""},e,l.options.easing,function(){l.$ul.attr("data-cycle",null),l.$slides.eq(t.index).css("display",null),l.$ul.css({width:100*l.$slides.length+"%",marginLeft:"-"+100*t.index+"%"}),l.cycle=!1,l.$viewport.trigger("animation_end",{index:t.index})})):(l.$ul.css("marginLeft","0"),l.animate(l.$ul,{marginLeft:"-100%"},e,l.options.easing,function(){l.$ul.attr("data-cycle",null),l.$slides.eq(t.index).css("display",null),l.$ul.css({width:100*l.$slides.length+"%",marginLeft:"-"+100*t.index+"%"}),l.cycle=!1,l.$viewport.trigger("animation_end",{index:t.index})}))):l.animate(l.$ul,{marginLeft:"-"+100*t.index+"%"},e,l.options.easing,function(){l.$viewport.trigger("animation_end",{index:t.index})})}}},animate:function(e,i,n,s,a){l.options.useCSS?(l.insertRule(".duration_"+n+" {"+l.transition.prefix+"transition-duration:"+n+"ms;}"),e.addClass("duration_"+n+" easing_"+s).one(l.transition.end,function(){e.removeClass("duration_"+n+" easing_"+s),a.call(this)}),t.setTimeout(function(){e.css(i)},10)):e.animate(i,n,s,a)},transition:function(){var i,s,a="",o=!1,r=e.createElement("fakeelement"),u={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend",transition:"transitionend"};for(i in u)if(r.style[i]!==n){s=u[i],o=!0;break}return/(WebKit)/i.test(t.navigator.userAgent)&&(a="-webkit-"),{prefix:a,end:s,supported:o}},insertRule:function(t){if(!l.rules||!l.rules[t])if(l.rules===n?l.rules={}:l.rules[t]=!0,e.styleSheets&&e.styleSheets.length)e.styleSheets[0].insertRule(t,0);else{var i=e.createElement("style");i.innerHTML=t,e.head.appendChild(i)}},touch:{supported:"ontouchstart"in t||t.DocumentTouch&&e instanceof DocumentTouch,eventType:function(t){var e={start:this.supported?"touchstart":"mousedown",move:this.supported?"touchmove":"mousemove",end:this.supported?"touchend":"mouseup",cancel:this.supported?"touchcancel":"mouseout"};return e[t]},setup:function(){l.$viewport.on(this.eventType("start"),i.proxy(this.startTouch,this))},getEvent:function(t){var e=t.originalEvent;return l.touch.supported&&e.touches.length&&e.touches[0]&&(e=e.touches[0]),e},startTouch:function(t){if(t.preventDefault(),l.isSliding)return!1;var n=this.getEvent(t);return this.data={},this.data.start=n.pageX,this.width=l.$viewport.width(),i(e).on(this.eventType("move"),i.proxy(this.moving,this)).on(this.eventType("end"),i.proxy(this.endTouch,this)),!1},moving:function(t){t.preventDefault();var n=this.getEvent(t);return this.data.distance=(n.pageX||this.data.start)-this.data.start,"fade"===l.options.animation?this.data.distance/this.width>l.options.touchSensitivity?(l.next(),i(e).off(this.eventType("move"))):this.data.distance/this.width<-l.options.touchSensitivity&&(l.prev(),i(e).off(this.eventType("move"))):l.$ul.css({marginLeft:-100*l.current+100*(this.data.distance/this.width)+"%"}),!1},endTouch:function(t){if(t.preventDefault(),i(e).off(this.eventType("move")).off(this.eventType("end")),"fade"===l.options.animation)return!1;var n=l.current-Math.round(this.data.distance/this.width);return 0>=n?n=0:n>=l.$slides.length-1&&(n=l.$slides.length-1),l.jumpTo(n),!1}}}),l.init()};s.defaults={namespace:"tiny",animation:"fade",easing:"swing",duration:1e3,delay:4e3,pager:!0,nav:!0,prevText:"Previous",nextText:"Next",random:!1,autoplay:!0,pauseOnHover:!0,useCSS:!0,touch:!0,touchSensitivity:.25,onStart:null,onBefore:null,onAfter:null,onEnd:null},s.prototype={constructor:s,play:function(){this.autoplay.enabled=!0,this.autoplay.start()},pause:function(){this.autoplay.stop()},stop:function(){this.autoplay.enabled=!1,this.autoplay.stop()},next:function(){var t=this.current+1;t>=this.$slides.length&&(t=0,this.options.cycle&&(this.cycle="next")),this.goTo(t)},prev:function(){var t=this.current-1;0>t&&(t=this.$slides.length-1,this.options.cycle&&(this.cycle="prev")),this.goTo(t)},go:function(){var t=this.current+1>=this.$slides.length?0:this.current+1;this.goTo(t)},goTo:function(t){return this.current===t?!1:(this.isSliding?this.wait=t:(this.wait=null,this.$viewport.trigger("go",{index:t})),n)},jumpTo:function(t){this.$viewport.trigger("go",{index:t,jump:!0})}},i.fn.tinySlider=function(t){if("string"==typeof t){var e=t,a=arguments.length>1?Array.prototype.slice.call(arguments,1):n;return this.each(function(){var t=i.data(this,"tinyslider");"function"==typeof t[e]&&t[e].apply(t,a)})}return this.each(function(){i.data(this,"tinyslider")||i.data(this,"tinyslider",new s(this,t))})}})(window,document,jQuery);