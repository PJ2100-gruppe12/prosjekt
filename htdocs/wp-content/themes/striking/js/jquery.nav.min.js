/*! Nav - v0.3.0 - 2012-10-29
* https://github.com/KaptinLin/nav
* Copyright (c) 2012 KaptinLin; Licensed GPL */
(function(e,t,n){"use strict";var r="nav",i=t.nav=function(e,n){function o(){i.windowDimensions=s.getWindowDimensions(),u(),t(window).bind("resize",s.resize)}function u(){r=!0;var e=s.$nav.find("> li");a(e,s.settings.root),a(e.find("li"),s.settings.child)}function a(e,n){s.hover(e,n.hoverIntent,n.delay,function(){var e=this,r=t(this).find("> ul");n.beforeHoverIn.call(e);if(r.size()>0){var o=t(e).data("check");typeof o=="undefined"&&n.beforeFirstRender.call(e);if(typeof o=="undefined"||o!==i.windowDimensions)n.position.call(e,r,s),t(e).data("check",i.windowDimensions);n.effect==="fade"?r.hide().css("visibility","visible").fadeIn(n.inDuration,function(){n.afterHoverIn.call(e)}):r.hide().css("visibility","visible").slideDown(n.inDuration,function(){n.afterHoverIn.call(e)})}else n.afterHoverIn.call(e)},function(){var e=this,r=t(this).find("> ul");n.beforeHoverOut.call(e),r.size()>0?n.effect==="fade"?r.fadeOut(n.outDuration,function(){r.css("visibility","hidden"),n.afterHoverOut.call(e)}):r.slideUp(n.outDuration,function(){r.css("visibility","hidden"),n.afterHoverOut.call(e)}):n.afterHoverOut.call(e)})}this.nav=e,this.$nav=t(e),this.settings=t.extend(!0,{},i.defaults,n);var r=!1,s=this;t.extend(s,{getNav:function(){return this.$nav},getCurrent:function(){var e=this.$nav.find(this.settings.currentSelector);return e.size()===0&&(e=this.$nav.find("li:first")),e.find("> a")},getWindowDimensions:function(){return{w:t(window).width(),h:t(window).height()}},resize:function(){i.windowDimensions=s.getWindowDimensions()},isBuilted:function(){return r},hover:function(e,n,r,i,s){typeof t.fn.hoverIntent!="undefined"?t(e).hoverIntent({sensitivity:30,interval:n,timeout:r,over:i,out:s}):t(e).hover(i,s)}}),o()};i.defaults={root:{effect:"slide",delay:100,hoverIntent:100,inDuration:200,outDuration:200,beforeHoverIn:function(){},afterHoverIn:function(){t(this).addClass("is-open")},beforeHoverOut:function(){},afterHoverOut:function(){t(this).removeClass("is-open")},beforeFirstRender:function(){},position:function(e,n){var r=this,s=t(this),o={left:s.offset().left,top:s.offset().top},u={w:e.outerWidth(),h:e.outerHeight()};o.left+u.w<i.windowDimensions.w?e.css({left:0}):o.left+r.offsetWidth<u.w?o.left<i.windowDimensions.w/2?e.css({left:-o.left+n.$nav.offset().left}):e.css({left:i.windowDimensions.w-o.left-u.w-n.$nav.offset().left}):e.css({left:"auto",right:0})}},child:{effect:"fade",delay:150,hoverIntent:0,inDuration:200,outDuration:200,beforeHoverIn:function(){},afterHoverIn:function(){t(this).addClass("is-open")},beforeHoverOut:function(){},afterHoverOut:function(){t(this).removeClass("is-open")},beforeFirstRender:function(){},position:function(e,n){var r=this,s=t(r),o={left:s.offset().left,top:s.offset().top},u={w:e.outerWidth(),h:e.outerHeight()};o.left+r.offsetWidth+u.w<i.windowDimensions.w?e.css({left:r.offsetWidth}):e.css({left:0-r.offsetWidth})}}},t.fn.nav=function(e){return this.each(function(){t.data(this,r)||t.data(this,r,new i(this,e))})}})(document,jQuery);