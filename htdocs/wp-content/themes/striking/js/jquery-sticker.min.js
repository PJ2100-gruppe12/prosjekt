/*! jQuery Sticker - v0.6.5 - 2013-07-24
* https://github.com/amazingSurge/jquery-sticker
* Copyright (c) 2013 amazingSurge; Licensed GPL */
!function(a,b,c,d){"use strict";var e=c(a),f=e.height(),g={count:0,started:!1,instances:[],types:{},generateId:function(){return this.count++,this.count},scroll:function(){c.each(g.instances,function(a,b){b.enabled&&(g.types[b.type].scroll(b),c.isFunction(b.options.scroll)&&b.options.scroll.call(b))})},resize:function(){f=e.height(),c.each(g.instances,function(a,b){b.enabled&&(g.types[b.type].resize(b),g.types[b.type].scroll(b),c.isFunction(b.options.resize)&&b.options.resize.call(b))})},start:function(){this.started||(e.on("scroll",this.scroll),e.on("resize",this.resize),this.started=!0)},stop:function(){this.started=!1,e.off("scroll",this.scroll),e.off("resize",this.resize)}},h=c.Sticker=function(a,b){this.element=a,this.$element=c(a),this.type=b.type!==d?b.type:h.defaults.type,this.options=c.extend({},h.defaults,g.types[this.type].defaults,b),this.enabled=!1,this.sticky=!1;var e=this.options.namespace;this.classes={},this.classes.wrapper=e+"-wrapper",this.classes.enabled=e+"-enabled",this.classes.sticky=e+"-sticky",this.components={},this.init()};h.defaults={namespace:"sticker",type:"top",init:null,destroy:null,scroll:null,resize:null,enable:null,disable:null,sticky:null,unsticky:null},h.registerType=function(a,b){g.types[a]=b},h.prototype={constructor:h,init:function(){this.id=g.generateId();var a=c("<div></div>").addClass(this.classes.wrapper),b=this.$element.attr("id");"undefined"!=typeof b&&a.attr("id",b+"-"+this.classes.wrapper),this.$element.wrapAll(a),this.$wrapper=this.$element.parent(),g.types[this.type].init(this),c.isFunction(this.options.init)&&this.options.init.call(this),this.enable(),g.instances.push(this),g.start()},destroy:function(){this.$element.unwrap();for(var a in g.instances)g.instances[a].id===this.id&&g.instances.splice(a,1);0===g.instances.length&&g.stop(),c.isFunction(this.options.destroy)&&this.options.destroy.call(this)},enable:function(){this.enabled=!0,g.types[this.type].enable(this),g.types[this.type].scroll(this),this.$wrapper.addClass(this.classes.enabled),c.isFunction(this.options.enable)&&this.options.enable.call(this)},disable:function(){this.enabled=!1,this.sticky=!1,g.types[this.type].disable(this),this.$wrapper.removeClass(this.classes.sticky).removeClass(this.classes.enabled),c.isFunction(this.options.disable)&&this.options.disable.call(this)},on:function(a,b){"string"==typeof a&&"function"==typeof b&&(this.options[a]=b)},off:function(a){"string"==typeof a&&(this.options[a]=null)},set:function(a,b){this.options[a]=b},update:function(){this.enabled&&g.types[this.type].scroll(this)}},h.registerType("top",{defaults:{topSpace:0},init:function(){},scroll:function(a){var b=e.scrollTop(),d=a.$wrapper.offset().top,f=a.options.topSpace;f>d&&d>=0&&(f=d);var g=d-f-b;0>g?a.sticky||(a.sticky=!0,a.$wrapper.addClass(a.classes.sticky),a.$element.css({position:"fixed",top:f}),c.isFunction(a.options.sticky)&&a.options.sticky.call(a)):a.sticky&&(a.sticky=!1,a.$wrapper.removeClass(a.classes.sticky),a.$element.css({position:"",top:""}),c.isFunction(a.options.unsticky)&&a.options.unsticky.call(a))},resize:function(a){a.$wrapper.css("height",a.$element.outerHeight())},enable:function(a){a.$wrapper.css("height",a.$element.outerHeight())},disable:function(a){a.$element.css({position:"",top:""}),a.$wrapper.css("height","")}}),h.registerType("fill",{defaults:{check:!0,callback:null,adjustHeight:null},init:function(){},scroll:function(a){var b=e.scrollTop(),d=c("body").height();c.isFunction(a.options.adjustHeight)&&(d=a.options.adjustHeight.call(a,d,f)),0===b&&f>=d?a.sticky||(a.sticky=!0,a.$wrapper.addClass(a.classes.sticky),a.$element.css({position:"fixed",bottom:0}),c.isFunction(a.options.sticky)&&a.options.sticky.call(a)):a.sticky&&(a.sticky=!1,a.$wrapper.removeClass(a.classes.sticky),a.$element.css({position:"",bottom:""}),c.isFunction(a.options.unsticky)&&a.options.unsticky.call(a)),c.isFunction(a.options.callback)&&a.options.callback.call(a,b,d,f)},resize:function(a){a.$wrapper.css("height",a.$element.outerHeight())},enable:function(a){if(a.$wrapper.css("height",a.$element.outerHeight()),a.options.check){var b=c("body").height();a.checkInterval=setInterval(function(){b!==c("body").height()&&(g.types[a.type].scroll(a),b=c("body").height())},500)}},disable:function(a){a.options.check&&clearInterval(a.checkInterval),a.$element.css({position:"",bottom:""}),a.$wrapper.css("height","")}}),h.registerType("bottom",{defaults:{bottomSpace:0},init:function(){},scroll:function(a){var b=e.scrollTop(),d=a.$wrapper.offset().top,g=a.$element.outerHeight(),h=b-(d-f+g+a.options.bottomSpace);0>h?a.sticky||(a.sticky=!0,a.$wrapper.addClass(a.classes.sticky),a.$element.css({position:"fixed",bottom:a.options.bottomSpace}),c.isFunction(a.options.sticky)&&a.options.sticky.call(a)):a.sticky&&(a.sticky=!1,a.$wrapper.removeClass(a.classes.sticky),a.$element.css({position:"",bottom:""}),c.isFunction(a.options.unsticky)&&a.options.unsticky.call(a))},resize:function(a){a.$wrapper.css("height",a.$element.outerHeight())},enable:function(a){a.$wrapper.css("height",a.$element.outerHeight())},disable:function(a){a.$element.css({position:"",bottom:""}),a.$wrapper.css("height","")}}),h.registerType("sidebar",{defaults:{topSpace:0,container:null},init:function(a){a.$container=a.options.container?c(a.options.container):a.$wrapper.parent(),a.containerHeight=a.$container.height(),a.containerTop=a.$container.offset().top},scroll:function(a){var b=e.scrollTop(),d=a.$wrapper.offset().top,f=a.$element.outerHeight(),g=b-d+a.options.topSpace;if(g>0){a.sticky||(a.sticky=!0,a.$wrapper.addClass(a.classes.sticky));var h=a.containerHeight-f+a.containerTop-d;g>h?a.$wrapper.css({paddingTop:h}):a.$wrapper.css({paddingTop:g}),c.isFunction(a.options.sticky)&&a.options.sticky.call(a)}else a.sticky&&(a.sticky=!1,a.$wrapper.removeClass(a.classes.sticky),a.$wrapper.css({paddingTop:""}),c.isFunction(a.options.unsticky)&&a.options.unsticky.call(a))},resize:function(a){a.containerHeight=a.$container.height(),a.containerTop=a.$container.offset().top},enable:function(){},disable:function(a){a.$wrapper.css({paddingTop:""})}}),c.fn.sticker=function(a){if("string"==typeof a){var b=a,e=arguments.length>1?Array.prototype.slice.call(arguments,1):d;return this.each(function(){var a=c.data(this,"sticker");a&&"function"==typeof a[b]&&a[b].apply(a,e)})}return this.each(function(){c.data(this,"sticker")||c.data(this,"sticker",new h(this,a))})}}(window,document,jQuery);